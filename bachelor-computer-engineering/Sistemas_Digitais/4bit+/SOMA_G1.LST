0001 |module SOMADOR
0002 |title 'Somador de duas palavras de 4 bits'
0003 |
0004 |        soma_g1        device  'p22v10';
0005 |
0006 |        A,B,C,D         pin 1,2,3,4;
0007 |        E,F,G,H         pin 5,6,7,8;
0008 |        CBO,S1,S2,S3,S4 pin 14,15,16,17,18;
0009 |        CBI,C4,C3,C2    pin 10,20,21,22;
0010 |        EN              pin 13;  
0011 |        M1 = [A,B,C,D];
0012 |        M2 = [E,F,G,H];
0013 |        RES = [CBO,S1,S2,S3,S4];
0014 |        ON,OFF = 1,0;
0015 |
0016 |equations
0017 |        
0018 |        [CBO,S1,S2,S3,S4].oe = EN;
0019 |
0020 |        S4      =       D $ H $ CBI;
0021 |        C4      =       (D & H) # (CBI & H) # (CBI & D);
0022 |
0023 |        S3      =       C $ G $ C4;
0024 |        C3      =       (C & G) # (C4 & G) # (C4 & C);
0025 |
0026 |        S2      =       B $ F $ C3;
0027 |        C2      =       (B & F) # (C3 & F) # (C3 & B);
0028 |
0029 |        S1      =       A $ E $ C2;
0030 |
0031 |        CBO     =       (A & E) # (C2 & E) # (C2 & A);
0032 |
0033 |test_vectors "Teste Somas" ( [EN,CBI,A,B,C,D,E,F,G,H] -> [CBO,S1,S2,S3,S4] )
0034 |                        [1,0,0,0,0,1,0,0,0,0] -> [0,0,0,0,1];
0035 |                        [1,0,1,1,1,1,1,1,1,1] -> [1,1,1,1,0];
0036 |                        [1,0,0,0,1,1,0,1,1,0] -> [0,1,0,0,1];
0037 |                        [1,0,1,1,1,1,0,1,1,1] -> [1,0,1,1,0];
0038 |                        [1,0,1,0,0,1,0,1,0,0] -> [0,1,1,0,1];
0039 |                        [1,0,1,1,0,0,0,1,1,1] -> [1,0,0,1,1];
0040 |                        [1,0,1,0,1,1,0,1,0,0] -> [0,1,1,1,1];
0041 |                        [1,0,1,1,0,0,0,0,1,1] -> [0,1,1,1,1];
0042 |                        [1,0,0,0,1,1,0,0,0,0] -> [0,0,0,1,1];
0043 |                        [1,0,0,0,0,0,0,0,1,1] -> [0,0,0,1,1];
0044 |                        [1,0,1,1,1,1,0,0,0,0] -> [0,1,1,1,1];
0045 |                        [1,0,1,0,1,0,0,1,1,1] -> [1,0,0,0,1];
0046 |                        [1,0,0,1,0,0,0,1,0,0] -> [0,1,0,0,0];
0047 |                        [1,0,1,1,0,1,0,1,1,1] -> [1,0,1,0,0];
0048 |                        [1,0,0,1,0,0,0,0,0,0] -> [0,0,1,0,0];
0049 |                        [1,0,0,0,0,1,0,0,1,1] -> [0,0,1,0,0];
0050 |                        [1,0,1,1,0,1,0,1,0,0] -> [1,0,0,0,1];
0051 |                        [1,0,0,0,1,0,0,0,1,1] -> [0,0,1,0,1];
0052 |                        [1,0,1,0,0,0,0,1,0,0] -> [0,1,1,0,0];
0053 |                        [1,0,0,1,1,1,0,0,1,1] -> [0,1,0,1,0];
0054 |                        [1,0,1,0,1,0,0,1,0,0] -> [0,1,1,1,0];
0055 |                        [1,1,0,0,0,1,0,0,1,1] -> [0,0,1,0,1];
0056 |                        [1,1,1,1,1,1,0,1,0,0] -> [1,0,1,0,0];
0057 |                        [1,1,0,1,0,0,0,1,1,1] -> [0,1,1,0,0];
0058 |                        [0,0,0,0,0,1,0,0,0,0] -> [.Z.,.Z.,.Z.,.Z.,.Z.];
0059 |
0060 |test_vectors "Teste Carrys" ( [EN,CBI,A,B,C,D,E,F,G,H] -> [CBO,C2,C3,C4] )
0061 |                        [1,0,0,0,0,1,0,0,0,0] -> [0,0,0,0];
0062 |                        [1,0,1,1,1,1,1,1,1,1] -> [1,1,1,1];
0063 |                        [1,0,0,0,1,1,0,1,1,0] -> [0,1,1,0];
0064 |
0065 |test_vectors "Teste Somas Dec" ( [EN,CBI,M1,M2] -> RES )
0066 |                        [ON,0,12,12] -> 24;
0067 |                        [ON,0,7,8] -> 15;
0068 |                        [ON,0,2,3] -> 5;
0069 |                        [ON,0,0,0] -> 0;
0070 |                        [ON,0,9,9] -> 18;
0071 |                        [ON,0,15,15] -> 30;
0072 |                        [ON,0,9,1] -> 10;
0073 |
0074 |test_vectors "Teste Carrys Dec" ( [EN,CBI,M1,M2] -> [CBO,C2,C3,C4] )
0075 |                        [ON,0,12,12] -> [1,1,0,0];
0076 |                        [ON,0,15,15] -> [1,1,1,1];
0077 |                        [ON,0,9,1] -> [0,0,0,1];
0078 |
0079 |end SOMADOR
